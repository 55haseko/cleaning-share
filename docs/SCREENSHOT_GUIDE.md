# スクリーンショット撮影ガイド

このドキュメントは、システムドキュメントに必要な28枚のスクリーンショットの撮影手順を記載しています。

---

## 準備

### 1. テストデータ投入

```bash
# バックエンド起動
cd backend
npm start

# フロントエンド起動（別ターミナル）
cd frontend
npm start
```

### 2. ブラウザ設定

- **推奨ブラウザ**: Google Chrome
- **画面サイズ**: 1920×1080（デスクトップ）または 375×812（モバイル）
- **スクリーンショット方法**:
  - Mac: `Cmd + Shift + 4` → スペース → ウィンドウクリック
  - Windows: `Win + Shift + S`
  - Chrome DevTools: `Cmd/Ctrl + Shift + P` → "Capture screenshot"

### 3. ログイン情報

```
管理者:
  email: admin@cleaning.com
  password: admin123

スタッフ:
  email: staff1@cleaning.com
  password: staff123

クライアント:
  email: client1@example.com
  password: client123
```

---

## 撮影リスト

### 【1】 システム構成図

**種類**: 図表（手動作成）

**ツール**: draw.io、Excalidraw、PowerPoint等

**内容**:
```
┌─────────────────────┐
│   ブラウザ          │
│   (React Frontend)  │
│   Port: 3000        │
└──────────┬──────────┘
           │ REST API (HTTP)
           │
┌──────────▼──────────┐
│  Express Backend    │
│  Port: 8000         │
│  - JWT認証          │
│  - Multer           │
│  - Sharp            │
└──────┬─────┬────────┘
       │     │
       │     └─────────┐
       │               │
┌──────▼──────┐  ┌────▼─────┐
│   MySQL     │  │ 本体FS   │
│   (DB)      │  │ uploads/ │
└─────────────┘  └──────────┘
```

**配置要素**:
- フロントエンド（React、ポート3000）
- バックエンド（Express、ポート8000、主要ライブラリ）
- データベース（MySQL）
- ストレージ（ローカルファイルシステム）
- 矢印で接続関係を示す

**保存名**: `01_system_architecture.png`

---

### 【2】 データフロー図

**種類**: 図表（手動作成）

**内容**: 写真アップロードの流れ

```
[スタッフ画面]
    ↓ 施設・日付選択
[PhotoSelector]
    ↓ ファイル選択
[imageCompression.js]
    ↓ 圧縮（300KB、1600px）
[batchUpload.js]
    ↓ 5枚ずつ分割
[POST /api/photos/upload]
    ↓ FormData
[Multer受信]
    ↓
[HEIC判定] ─YES→ [heic-convert] → JPEG
    ↓ NO
[Sharp処理]
    ├→ リサイズ（1600px）
    └→ サムネイル（400px）
    ↓
[FS保存] → uploads_dev/photos/{...}
    ↓
[DB登録] → photos テーブル
    ↓
[レスポンス] → {files: [...]}
    ↓
[進捗表示]
```

**保存名**: `02_data_flow.png`

---

### 【3】 ログイン画面

**手順**:
1. ブラウザで `http://localhost:3000` を開く
2. ログアウト状態にする（localStorageクリア）
3. ページリロード

**撮影内容**:
- メールアドレス入力フィールド
- パスワード入力フィールド（目のアイコン表示）
- ログインボタン
- システムタイトル

**保存名**: `03_login_screen.png`

---

### 【4】 ER図

**種類**: 図表（手動作成）

**ツール**: MySQL Workbench、dbdiagram.io、draw.io

**内容**: 全テーブルとリレーション

```
users
  ├─ id (PK)
  ├─ email
  ├─ password_hash
  ├─ name
  ├─ role
  └─ is_active

facilities
  ├─ id (PK)
  ├─ name
  ├─ address
  └─ is_deleted

facility_clients
  ├─ id (PK)
  ├─ facility_id (FK → facilities.id)
  ├─ client_user_id (FK → users.id)
  └─ removed_at

cleaning_sessions
  ├─ id (PK)
  ├─ facility_id (FK → facilities.id)
  ├─ cleaning_date
  ├─ staff_user_id (FK → users.id)
  ├─ ventilation_checked
  └─ air_filter_checked

photos
  ├─ id (PK)
  ├─ cleaning_session_id (FK → cleaning_sessions.id)
  ├─ file_path
  ├─ thumbnail_path
  ├─ type
  └─ uploaded_at

receipts
  ├─ id (PK)
  ├─ cleaning_session_id (FK)
  ├─ facility_id (FK → facilities.id)
  ├─ month
  ├─ file_path
  └─ uploaded_by (FK → users.id)
```

**リレーション**:
- users ←→ facility_clients ←→ facilities
- facilities → cleaning_sessions
- cleaning_sessions → photos
- cleaning_sessions → receipts

**保存名**: `04_er_diagram.png`

---

### 【5】 管理者画面 - ユーザー管理タブ

**手順**:
1. `admin@cleaning.com` でログイン
2. 「ユーザー管理」タブをクリック
3. ユーザー一覧が表示される

**撮影内容**:
- ユーザー一覧テーブル（email、名前、役割、アクション）
- 「新規ユーザー作成」ボタン
- 各行の編集/削除/パスワードリセットボタン

**保存名**: `05_admin_users.png`

---

### 【6】 管理者画面 - 施設管理タブ

**手順**:
1. admin でログイン
2. 「施設管理」タブをクリック

**撮影内容**:
- 施設一覧テーブル（施設名、住所、クライアント）
- 「新規施設作成」ボタン
- 編集/削除ボタン

**保存名**: `06_admin_facilities.png`

---

### 【7】 スタッフ画面 - 写真アップロード

**手順**:
1. `staff1@cleaning.com` でログイン
2. 「写真アップロード」タブが表示される
3. 施設を選択
4. 写真を5枚程度ドラッグ&ドロップ（プレビュー表示前）

**撮影内容**:
- 施設検索バー
- 施設選択ドロップダウン
- 日付選択
- 写真タイプ（before/after）選択
- ドラッグ&ドロップエリア（点線の枠）
- 「写真を選択」ボタン

**保存名**: `07_staff_photo_upload.png`

---

### 【8】 スタッフ画面 - 領収書アップロード

**手順**:
1. staff でログイン
2. 「領収書」タブをクリック

**撮影内容**:
- 施設選択
- 月選択（年月ピッカー）
- ファイル選択ボタン
- アップロードボタン

**保存名**: `08_staff_receipt_upload.png`

---

### 【9】 管理者画面 - 月次点検ダッシュボード

**手順**:
1. admin でログイン
2. 「月次点検」タブをクリック

**撮影内容**:
- 完了率表示（換気扇、エアコンフィルター）
- 施設別点検状況テーブル
- 最終チェック日時

**保存名**: `09_admin_monthly_check.png`

---

### 【10】 ログイン画面（全体）

**手順**:
1. ログアウト
2. 全画面表示

**撮影内容**:
- ヘッダー含む全画面
- フォーム全体
- 背景色

**保存名**: `10_login_full.png`

---

### 【11】 スタッフ画面 - 写真タブ全体

**手順**:
1. staff でログイン
2. 施設選択
3. 写真を複数選択してプレビュー表示

**撮影内容**:
- 施設リスト
- 検索バー
- ソートボタン
- 写真プレビュー（サムネイル）
- アップロードボタン

**保存名**: `11_staff_photo_full.png`

---

### 【12】 写真プレビュー（複数選択時）

**手順**:
1. staff でログイン
2. 写真を10枚選択
3. プレビュー表示を拡大

**撮影内容**:
- 10枚のサムネイル画像
- 各画像の削除ボタン（×）
- ファイル名表示

**保存名**: `12_photo_preview_multiple.png`

---

### 【13】 アップロード進捗バー

**手順**:
1. staff でログイン
2. 写真を50枚選択
3. アップロードボタンをクリック
4. 進捗バー表示中にスクリーンショット

**撮影内容**:
- 進捗バー（例: 40%）
- 「アップロード中... 20/50枚完了」テキスト
- キャンセルボタン（あれば）

**保存名**: `13_upload_progress.png`

---

### 【14】 スタッフ画面 - 領収書タブ（全体）

**手順**:
1. staff でログイン
2. 領収書タブをクリック

**撮影内容**:
- タブ全体
- 施設選択、月選択、ファイル選択の全UI

**保存名**: `14_staff_receipt_full.png`

---

### 【15】 スタッフ画面 - 月次点検タブ

**手順**:
1. staff でログイン
2. 「月次点検」タブをクリック

**撮影内容**:
- 施設選択
- 換気扇チェックボックス（チェック済み）
- エアコンフィルターチェックボックス（未チェック）
- 保存ボタン
- 完了状態表示

**保存名**: `15_staff_monthly_check.png`

---

### 【16】 クライアント画面 - 清掃記録タブ

**手順**:
1. `client1@example.com` でログイン
2. 施設を選択
3. 写真が表示される

**撮影内容**:
- 施設選択ドロップダウン
- 日付フィルター
- before/after タブ
- サムネイル一覧（6〜12枚表示）
- ZIPダウンロードボタン

**保存名**: `16_client_photos.png`

---

### 【17】 画像拡大モーダル（全画面）

**手順**:
1. client でログイン
2. サムネイルをクリック
3. モーダル表示

**撮影内容**:
- 全画面の画像表示
- 前/次ボタン（矢印）
- 閉じるボタン（×）
- 画像情報（日付、タイプ）

**保存名**: `17_image_modal.png`

---

### 【18】 before/afterタブ切替

**手順**:
1. client でログイン
2. before タブをクリック → スクリーンショット
3. after タブをクリック → スクリーンショット（別ファイル）

**撮影内容**:
- タブの選択状態（アクティブなタブがハイライト）
- 表示される写真の違い

**保存名**: `18_tab_switch.png`

---

### 【19】 クライアント画面 - 領収書タブ

**手順**:
1. client でログイン
2. 「領収書」タブをクリック

**撮影内容**:
- 月別グループ表示
- PDFファイル一覧
- プレビュー/ダウンロードボタン

**保存名**: `19_client_receipts.png`

---

### 【20】 管理者画面 - 統計タブ

**手順**:
1. admin でログイン
2. 「統計」タブをクリック（デフォルト表示の場合もあり）

**撮影内容**:
- 今日のアップロード数
- 総施設数
- アクティブユーザー数
- 最近のアップロード履歴（テーブル）

**保存名**: `20_admin_stats.png`

---

### 【21】 管理者画面 - 施設管理タブ（全体）

**手順**:
1. admin でログイン
2. 施設管理タブをクリック

**撮影内容**:
- 全画面表示
- テーブル全体

**保存名**: `21_admin_facilities_full.png`

---

### 【22】 施設作成モーダル（複数クライアント選択）

**手順**:
1. admin でログイン
2. 施設管理タブ
3. 「新規施設作成」ボタンをクリック
4. モーダル表示

**撮影内容**:
- 施設名入力フィールド
- 住所入力フィールド
- クライアント選択（複数チェックボックス）
- 保存/キャンセルボタン

**保存名**: `22_facility_create_modal.png`

---

### 【23】 管理者画面 - ユーザー管理タブ（全体）

**手順**:
1. admin でログイン
2. ユーザー管理タブをクリック

**撮影内容**:
- 全画面表示
- テーブル全体

**保存名**: `23_admin_users_full.png`

---

### 【24】 ユーザー作成モーダル

**手順**:
1. admin でログイン
2. ユーザー管理タブ
3. 「新規ユーザー作成」ボタンをクリック

**撮影内容**:
- メール入力
- パスワード入力
- 名前入力
- 役割選択（admin/staff/client）
- 保存/キャンセルボタン

**保存名**: `24_user_create_modal.png`

---

### 【25】 管理者画面 - 月次点検タブ（全体）

**手順**:
1. admin でログイン
2. 月次点検タブをクリック

**撮影内容**:
- 全画面表示
- 完了率グラフ/テーブル

**保存名**: `25_admin_monthly_full.png`

---

### 【26】 画像処理フロー図

**種類**: 図表（手動作成）

**内容**:

```
[アップロード]
    ↓
[HEIC/HEIF?]
    ├─ YES → [heic-convert]
    │          ↓
    │       [JPEG (q=100)]
    │          ↓
    └─ NO  ─→ [Sharp]
              ↓
          [メタデータ取得]
              ↓
          [1600px超?]
              ├─ YES → [resize(1600,1600)]
              └─ NO  → [そのまま]
              ↓
          [JPEG圧縮 (q=80)]
              ↓
          [ファイル保存]
              ↓
          [サムネイル生成]
              ↓
          [resize(400,400)]
              ↓
          [JPEG (q=80)]
              ↓
          [thumbnails/保存]
              ↓
          [DB登録]
```

**保存名**: `26_image_processing_flow.png`

---

### 【27】 遅延ロード動作

**手順**:
1. client でログイン
2. 写真が20枚以上あるアルバムを表示
3. Chrome DevTools を開く
4. Network タブで画像リクエストを監視
5. ゆっくりスクロールしながらスクリーンショット

**撮影内容**:
- 上部: 読み込み済みの画像
- 中央: 読み込み中の画像（プレースホルダーまたはスピナー）
- 下部: 未読み込みの画像エリア
- DevTools の Network タブ（オプション）

**保存名**: `27_lazy_loading.png`

---

### 【28】 ログ出力例（削除処理）

**手順**:
1. ターミナルで削除スクリプトを実行

```bash
cd backend
npm run cleanup
```

2. ログ出力をスクリーンショット

**撮影内容**:
```
写真削除処理開始: 60日前(2024-10-15)より古いファイルを削除
古いファイル削除: uploads_dev/photos/1/2024-10/2024-10-15/fac-1_20241015_before_abc123.jpg
古いファイル削除: uploads_dev/photos/1/2024-10/2024-10-15/fac-1_20241015_after_def456.jpg
...
写真削除処理完了: 25件削除
```

**保存名**: `28_cleanup_log.png`

---

## ファイル命名規則

すべてのスクリーンショットは以下の形式で保存してください：

```
{番号2桁}_{内容}_screenshot.png

例:
01_system_architecture.png
02_data_flow.png
03_login_screen.png
...
28_cleanup_log.png
```

---

## 保存場所

```
cleaning-share/
└── docs/
    └── screenshots/
        ├── 01_system_architecture.png
        ├── 02_data_flow.png
        ├── 03_login_screen.png
        └── ...
```

---

## 撮影のポイント

### 画面サイズ

- **デスクトップ**: 1920×1080 または 1440×900
- **モバイル**: 375×812 (iPhone X相当)

### 品質

- **形式**: PNG（ロスレス）
- **解像度**: 72dpi以上
- **ファイルサイズ**: 1MB以下（圧縮推奨）

### 内容

- **個人情報**: テストデータのみ（実データは含めない）
- **UI状態**: エラーメッセージなし、正常表示
- **配色**: デフォルトテーマ使用
- **フォーカス**: 該当機能が明確にわかるよう撮影

### 注意事項

1. **実データ禁止**: 実在の施設名、個人名は含めない
2. **エラー非表示**: エラーメッセージが表示されている状態は避ける
3. **統一感**: 同じブラウザ、同じテーマで撮影
4. **鮮明さ**: ぼやけ、文字のつぶれがないこと

---

## 完了チェックリスト

撮影完了後、以下を確認してください：

- [ ] 28枚すべて撮影完了
- [ ] ファイル名が規則に従っている
- [ ] `docs/screenshots/` に保存
- [ ] PNG形式
- [ ] 個人情報なし
- [ ] エラーメッセージなし
- [ ] 鮮明な画質
- [ ] ファイルサイズ1MB以下

---

## システムドキュメントへの差し込み

撮影完了後、`SYSTEM_DOCUMENTATION.md` の該当箇所に画像を挿入してください：

```markdown
**【スクリーンショット1】**: システム構成図
![システム構成図](screenshots/01_system_architecture.png)
```

---

**撮影ガイド終了**
